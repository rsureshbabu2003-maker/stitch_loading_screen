<!DOCTYPE html>

<html class="light" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Zepto Clone - Product Listing</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
        href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&amp;display=swap"
        rel="stylesheet" />
    <!-- Material Symbols -->
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <!-- Tailwind Config -->
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#7706f9",
                        "background-light": "#f7f5f8",
                        "background-dark": "#180f23",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style>
        /* Custom scrollbar for sidebar */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark font-display antialiased text-[#141118] dark:text-gray-100 min-h-screen flex flex-col">
    <!-- Top Navigation -->
    <header
        class="sticky top-0 z-50 bg-white dark:bg-[#1e1a24] border-b border-[#f2f0f5] dark:border-gray-800 shadow-sm">
        <div class="px-4 md:px-10 py-3 flex items-center justify-between gap-4">
            <!-- Logo & Search -->
            <div class="flex items-center gap-4 lg:gap-8 flex-1">
                <a href="index.html" class="flex items-center gap-3 shrink-0">
                    <div class="size-8 text-primary flex items-center justify-center">
                        <!-- Logo Icon -->
                        <span class="material-symbols-outlined text-4xl">local_mall</span>
                    </div>
                    <h2 class="hidden md:block text-[#141118] dark:text-white text-2xl font-extrabold tracking-tight">
                        Zepto</h2>
                </a>
                <!-- Search Bar -->
                <div class="flex-1 max-w-xl">
                    <div
                        class="flex w-full items-center rounded-xl bg-[#f2f0f5] dark:bg-gray-800 h-11 px-4 transition-all focus-within:ring-2 focus-within:ring-primary/50">
                        <span class="material-symbols-outlined text-[#745f8c] dark:text-gray-400">search</span>
                        <input
                            class="w-full bg-transparent border-none focus:ring-0 text-[#141118] dark:text-white placeholder-[#745f8c] dark:placeholder-gray-500 ml-3 text-sm font-medium"
                            placeholder="Search for 'milk'" />
                    </div>
                </div>
            </div>
            <!-- Right Actions -->
            <div class="hidden lg:flex items-center gap-6 xl:gap-9">
                <a class="flex items-center gap-2 text-[#141118] dark:text-gray-200 text-sm font-bold hover:text-primary transition-colors"
                    href="#">
                    <span class="material-symbols-outlined text-lg">location_on</span>
                    <span>Mumbai, India</span>
                </a>
                <a class="flex items-center gap-2 text-[#141118] dark:text-gray-200 text-sm font-medium hover:text-primary transition-colors"
                    href="cart.html">
                    <span class="material-symbols-outlined text-lg">shopping_cart</span>
                    <span>Cart</span>
                </a>
                <a class="flex items-center gap-2 text-[#141118] dark:text-gray-200 text-sm font-medium hover:text-primary transition-colors"
                    href="profile.html">
                    <span class="material-symbols-outlined text-lg">person</span>
                    <span>Profile</span>
                </a>
                <a href="login.html"
                    class="flex items-center justify-center h-10 px-6 rounded-lg bg-primary hover:bg-primary/90 text-white text-sm font-bold transition-colors shadow-lg shadow-primary/30">
                    Login
                </a>
            </div>
            <!-- Mobile Menu Toggle -->
            <button class="lg:hidden text-[#141118] dark:text-white">
                <span class="material-symbols-outlined">menu</span>
            </button>
        </div>
    </header>
    <!-- Main Layout -->
    <div class="flex-1 w-full max-w-[1440px] mx-auto flex items-start gap-6 px-4 md:px-8 py-6">
        <!-- Sidebar Navigation (Desktop) -->
        <aside
            class="hidden lg:flex flex-col w-64 shrink-0 bg-white dark:bg-[#1e1a24] rounded-xl border border-[#f2f0f5] dark:border-gray-800 h-[calc(100vh-120px)] sticky top-24 overflow-y-auto no-scrollbar shadow-sm">
            <div class="p-4 border-b border-[#f2f0f5] dark:border-gray-800">
                <h1 class="text-[#141118] dark:text-white text-lg font-bold">Categories</h1>
                <p class="text-[#745f8c] dark:text-gray-400 text-xs mt-1">Select a category</p>
            </div>
            <nav class="flex flex-col gap-1 p-3" id="sidebar-nav">
                <!-- Sidebar items will be rendered dynamically -->
            </nav>
        </aside>
        <!-- Main Content Area -->
        <main class="flex-1 min-w-0">
            <!-- Breadcrumbs -->
            <div class="flex flex-wrap items-center gap-2 text-sm mb-4 text-[#745f8c] dark:text-gray-400">
                <a class="hover:text-primary transition-colors" href="index.html">Home</a>
                <span class="material-symbols-outlined text-sm">chevron_right</span>
                <a class="hover:text-primary transition-colors" href="products.html">Groceries</a>
                <span class="material-symbols-outlined text-sm">chevron_right</span>
                <span id="breadcrumb-category" class="text-[#141118] dark:text-white font-medium">Fresh
                    Vegetables</span>
            </div>
            <!-- Page Title & Filters -->
            <div class="mb-6">
                <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4">
                    <h1 class="text-2xl md:text-[32px] font-bold text-[#141118] dark:text-white leading-tight">Fresh
                        Vegetables <span class="text-lg font-medium text-gray-400 align-middle ml-2">(42)</span></h1>
                    <!-- Sorting Chips -->
                    <div class="flex gap-2 overflow-x-auto pb-2 md:pb-0 no-scrollbar">
                        <button
                            class="flex h-9 shrink-0 items-center justify-center gap-2 rounded-lg border border-[#f2f0f5] bg-white dark:bg-[#1e1a24] dark:border-gray-700 pl-3 pr-2 hover:border-primary/50 transition-colors group">
                            <span class="text-[#141118] dark:text-gray-200 text-xs font-bold">Sort: Relevance</span>
                            <span
                                class="material-symbols-outlined text-base text-gray-400 group-hover:text-primary">keyboard_arrow_down</span>
                        </button>
                        <button
                            class="flex h-9 shrink-0 items-center justify-center gap-2 rounded-lg border border-[#f2f0f5] bg-white dark:bg-[#1e1a24] dark:border-gray-700 pl-3 pr-2 hover:border-primary/50 transition-colors group">
                            <span class="text-[#141118] dark:text-gray-200 text-xs font-bold">Price: Low to High</span>
                            <span
                                class="material-symbols-outlined text-base text-gray-400 group-hover:text-primary">keyboard_arrow_down</span>
                        </button>
                    </div>
                </div>
                <!-- Quick Filters -->
                <div class="flex gap-2 overflow-x-auto no-scrollbar">
                    <button
                        class="whitespace-nowrap rounded-full bg-white dark:bg-[#1e1a24] border border-gray-200 dark:border-gray-700 px-4 py-1.5 text-xs font-bold text-[#141118] dark:text-gray-200 hover:bg-[#f2f0f5] dark:hover:bg-gray-800 transition-colors">
                        In Stock
                    </button>
                    <button
                        class="whitespace-nowrap rounded-full bg-white dark:bg-[#1e1a24] border border-gray-200 dark:border-gray-700 px-4 py-1.5 text-xs font-bold text-[#141118] dark:text-gray-200 hover:bg-[#f2f0f5] dark:hover:bg-gray-800 transition-colors">
                        Organic
                    </button>
                    <button
                        class="whitespace-nowrap rounded-full bg-white dark:bg-[#1e1a24] border border-gray-200 dark:border-gray-700 px-4 py-1.5 text-xs font-bold text-[#141118] dark:text-gray-200 hover:bg-[#f2f0f5] dark:hover:bg-gray-800 transition-colors">
                        Discounted
                    </button>
                </div>
            </div>
            <!-- Product Grid -->
            <div id="product-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4 pb-20">
                <!-- Products will be dynamically rendered here -->
            </div>
        </main>
    </div>

    <!-- Dynamic Product Logic -->
    <script>
        // Global App State
        let currentCategory = 'vegetables';

        // Robust Category Data Map
        const categoryData = {
            "vegetables": {
                name: "Fresh Vegetables",
                slug: "vegetables",
                icon: "nutrition",
                products: [
                    { id: 1, name: "Fresh Red Onion (Pyaz)", weight: "1 kg", price: 39, originalPrice: 45, discount: "14% OFF", time: "8 MINS", image: "https://images.unsplash.com/photo-1618512496248-a07fe83aa8cb?w=400&q=80" },
                    { id: 2, name: "Hybrid Tomato", weight: "500 g", price: 20, originalPrice: 25, discount: "20% OFF", time: "6 MINS", image: "https://images.unsplash.com/photo-1592924357228-91a4daadcfea?w=400&q=80" },
                    { id: 3, name: "Fresh Cabbage", weight: "1 pc", price: 32, originalPrice: null, discount: null, time: "12 MINS", image: "https://images.unsplash.com/photo-1550186532-628d2543c7b7?w=400&q=80" },
                    { id: 5, name: "Fresh Ooty Carrots", weight: "500 g", price: 45, originalPrice: 60, discount: "25% OFF", time: "15 MINS", image: "https://images.unsplash.com/photo-1598170845058-32b9d6a5da37?w=400&q=80" },
                    { id: 6, name: "Potatoes", weight: "1 kg", price: 36, originalPrice: 40, discount: "10% OFF", time: "8 MINS", image: "https://images.unsplash.com/photo-1518977676601-b53f82aba655?w=400&q=80" },
                    { id: 8, name: "Okra (Bhindi)", weight: "500 g", price: 35, originalPrice: null, discount: null, time: "NEXT DAY", isSoldOut: false, image: "https://images.unsplash.com/photo-1449300079323-02e209d9d3a6?w=400&q=80" }
                ]
            },
            "fruits": {
                name: "Fruits",
                slug: "fruits",
                icon: "category",
                products: [
                    { id: 101, name: "Bananas", weight: "1 kg", price: 45, originalPrice: 60, discount: "25% OFF", time: "8 MINS", image: "https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?w=400&q=80" },
                    { id: 102, name: "Red Macintosh Apple", weight: "4 pcs", price: 120, originalPrice: 150, discount: "20% OFF", time: "10 MINS", image: "https://images.unsplash.com/photo-1560806887-1e4cd0b6cbd6?w=400&q=80" },
                    { id: 103, name: "Pomegranate", weight: "3 pcs", price: 180, originalPrice: 200, discount: "10% OFF", time: "12 MINS", image: "https://images.unsplash.com/photo-1541336183-b54432103759?w=400&q=80" },
                    { id: 104, name: "Papaya", weight: "1 pc", price: 55, originalPrice: null, discount: null, time: "15 MINS", image: "https://images.unsplash.com/photo-1627916533722-b43e867bd615?w=400&q=80" }
                ]
            },
            "dairy-bread": {
                name: "Dairy & Bread",
                slug: "dairy-bread",
                icon: "eco",
                products: [
                    { id: 201, name: "Amul Taaza Milk", weight: "1 L", price: 72, originalPrice: null, discount: null, time: "6 MINS", image: "https://images.unsplash.com/photo-1563636619-e9143da7973b?w=400&q=80" },
                    { id: 202, name: "Modern Whole Wheat Bread", weight: "400 g", price: 45, originalPrice: 50, discount: "10% OFF", time: "8 MINS", image: "https://images.unsplash.com/photo-1509440159596-0249088772ff?w=400&q=80" },
                    { id: 203, name: "Butter", weight: "100 g", price: 56, originalPrice: 60, discount: "6% OFF", time: "5 MINS", image: "https://images.unsplash.com/photo-1589985270826-4b7bb135bc9d?w=400&q=80" }
                ]
            },
            "atta-rice": {
                name: "Atta, Rice & Dal",
                slug: "atta-rice",
                icon: "rice_bowl",
                products: [
                    { id: 301, name: "Whole Wheat Flour", weight: "10 kg", price: 410, originalPrice: 450, discount: "8% OFF", time: "25 MINS", image: "https://images.unsplash.com/photo-1627485937980-221c88ac04f9?w=400&q=80" },
                    { id: 302, name: "Basmati Rice", weight: "1 kg", price: 125, originalPrice: 160, discount: "22% OFF", time: "20 MINS", image: "https://images.unsplash.com/photo-1586201375761-83865001e31c?w=400&q=80" }
                ]
            },
            "snacks": {
                name: "Snacks & Munchies",
                slug: "snacks",
                icon: "cookie",
                products: [
                    { id: 401, name: "Lays Classic Salted", weight: "50 g", price: 20, originalPrice: null, discount: null, time: "6 MINS", image: "https://images.unsplash.com/photo-1566478988047-8c03bcacaa5a?w=400&q=80" },
                    { id: 402, name: "Nachos Cheese", weight: "150 g", price: 90, originalPrice: 110, discount: "18% OFF", time: "8 MINS", image: "https://images.unsplash.com/photo-1513456852971-30c0b8199d4d?w=400&q=80" }
                ]
            },
            "cold-drinks": {
                name: "Cold Drinks",
                slug: "cold-drinks",
                icon: "local_drink",
                products: [
                    { id: 502, name: "Orange Juice", weight: "1 L", price: 120, originalPrice: 150, discount: "20% OFF", time: "10 MINS", image: "https://images.unsplash.com/photo-1613478223719-2ab802602423?w=400&q=80" },
                    { id: 506, name: "Lemonade", weight: "300 ml", price: 35, originalPrice: null, discount: null, time: "6 MINS", image: "https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?w=400&q=80" }
                ]
            },
            "cleaning-essentials": {
                name: "Cleaning Essentials",
                slug: "cleaning-essentials",
                icon: "cleaning_services",
                products: [
                    { id: 601, name: "Dish Soap", weight: "500 ml", price: 105, originalPrice: 120, discount: "12% OFF", time: "15 MINS", image: "https://images.unsplash.com/photo-1635321356066-50bdad78e228?w=400&q=80" },
                    { id: 602, name: "Toilet Cleaner", weight: "500 ml", price: 95, originalPrice: 105, discount: "9% OFF", time: "15 MINS", image: "https://images.unsplash.com/photo-1563453392212-326f5e854473?w=400&q=80" }
                ]
            }
        };

        // Cart Object (reusing existing one)
        const Cart = {
            get: () => JSON.parse(localStorage.getItem('stitch_cart')) || [],
            set: (cart) => localStorage.setItem('stitch_cart', JSON.stringify(cart)),
            add: (product) => {
                const cart = Cart.get();
                const existing = cart.find(item => item.id === product.id);
                if (existing) existing.quantity += 1;
                else cart.push({ ...product, quantity: 1 });
                Cart.set(cart);
                const toast = document.createElement('div');
                toast.className = `fixed bottom-20 left-1/2 -translate-x-1/2 bg-black/80 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg z-50 animate-bounce transition-all`;
                toast.textContent = 'Added to Cart!';
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 2000);
            }
        };

        // SPA Navigation Logic
        function switchCategory(slug, pushState = true) {
            if (!categoryData[slug]) slug = 'vegetables';
            currentCategory = slug;

            // Update URL
            if (pushState) {
                const newUrl = `${window.location.pathname}?category=${slug}`;
                history.pushState({ category: slug }, '', newUrl);
            }

            renderSidebar();
            renderContent();
        }

        function renderSidebar() {
            const nav = document.getElementById('sidebar-nav');
            nav.innerHTML = Object.values(categoryData).map(cat => {
                const isActive = cat.slug === currentCategory;
                return `
    <a href="javascript:void(0)" onclick="switchCategory('${cat.slug}')"
        class="flex items-center gap-3 px-3 py-3 rounded-lg transition-all group ${isActive ? 'bg-[#f3eefe] dark:bg-primary/20 text-primary border border-primary/10 font-bold' : 'hover:bg-[#f2f0f5] dark:hover:bg-gray-800 text-[#141118] dark:text-gray-300 font-medium'}">
        <span
            class="material-symbols-outlined ${isActive ? '' : 'text-gray-400 group-hover:text-primary'}">${cat.icon}</span>
        <span class="text-sm">${cat.name}</span>
    </a>
    `;
            }).join('');
        }

        function renderContent() {
            const data = categoryData[currentCategory];
            const grid = document.getElementById('product-grid');
            const titleEl = document.querySelector('h1.text-2xl');
            const breadcrumbEl = document.getElementById('breadcrumb-category');

            // Update UI
            titleEl.innerHTML = `${data.name} <span
        class="text-lg font-medium text-gray-400 align-middle ml-2">(${data.products.length})</span>`;
            breadcrumbEl.textContent = data.name;

            // Render Grid
            grid.innerHTML = data.products.map(item => `
    <div
        class="group flex flex-col justify-between rounded-xl bg-white dark:bg-[#1e1a24] border border-[#f2f0f5] dark:border-gray-800 p-3 hover:shadow-xl hover:border-primary/20 hover:-translate-y-1 transition-all duration-300">
        <div
            class="relative mb-3 h-32 md:h-40 w-full rounded-lg bg-[#f9f9f9] dark:bg-gray-800 flex items-center justify-center overflow-hidden">
            ${item.discount ? `<div
                class="absolute top-0 left-0 bg-primary/10 text-[10px] font-extrabold text-primary px-2 py-1 rounded-br-lg z-10">
                ${item.discount}</div>` : ''}
            <img alt="${item.name}" class="h-full w-full object-cover mix-blend-multiply dark:mix-blend-normal"
                src="${item.image}" loading="lazy" />
        </div>
        <div class="flex flex-col gap-1">
            <div
                class="flex items-center gap-1 text-[10px] font-bold text-gray-500 bg-[#f2f0f5] dark:bg-gray-800 w-fit px-1.5 py-0.5 rounded">
                <span class="material-symbols-outlined text-[12px]">timer</span>
                ${item.time}
            </div>
            <h3 class="text-sm md:text-base font-bold text-[#141118] dark:text-white leading-tight line-clamp-2">
                ${item.name}</h3>
            <p class="text-xs text-gray-500 font-medium">${item.weight}</p>
        </div>
        <div class="flex items-end justify-between mt-3">
            <div class="flex flex-col">
                ${item.originalPrice ? `<span class="text-xs text-gray-400 line-through">₹${item.originalPrice}</span>`
                    : ''}
                <span class="text-sm md:text-base font-bold text-[#141118] dark:text-white">₹${item.price}</span>
            </div>
            <button onclick='Cart.add(${JSON.stringify(item)})'
                class="relative overflow-hidden rounded-lg border border-primary bg-white dark:bg-transparent px-5 py-1.5 text-xs md:text-sm font-bold text-primary shadow-sm hover:bg-primary hover:text-white transition-all active:scale-95">Add</button>
        </div>
    </div>
    `).join('');
        }

        // Handle Search (Simplified for now, can be integrated into categoryData if needed)
        function handleSearch(term) {
            const grid = document.getElementById('product-grid');
            const results = [];
            Object.values(categoryData).forEach(cat => {
                cat.products.forEach(p => {
                    if (p.name.toLowerCase().includes(term.toLowerCase())) results.push(p);
                });
            });

            // Render results (minimal implementation for emergency fix)
            grid.innerHTML = results.map(item => `
    <div
        class="group flex flex-col justify-between rounded-xl bg-white dark:bg-[#1e1a24] border border-[#f2f0f5] dark:border-gray-800 p-3">
        <img class="h-32 w-full object-cover" src="${item.image}" />
        <h3 class="font-bold text-sm mt-2">${item.name}</h3>
        <p class="text-xs">₹${item.price}</p>
        <button onclick='Cart.add(${JSON.stringify(item)})'
            class="bg-primary text-white text-xs p-1 mt-2 rounded">Add</button>
    </div>
    `).join('');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const initialCat = params.get('category') || 'vegetables';
            switchCategory(initialCat, false);

            // Listen for browser back/forward
            window.addEventListener('popstate', (e) => {
                if (e.state && e.state.category) switchCategory(e.state.category, false);
            });

            const searchInput = document.querySelector('input[placeholder*="Search"]');
            if (searchInput) {
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') handleSearch(searchInput.value);
                });
            }
        });
    </script>
    <!-- Sticky Cart Summary Footer (Mobile) -->
    <!-- Ideally logic should be added here too, but hiding for now or leaving as static placeholder -->
    <div
        class="fixed bottom-0 left-0 w-full p-4 bg-white dark:bg-[#1e1a24] border-t border-[#f2f0f5] dark:border-gray-800 lg:hidden shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-40">
        <div class="flex items-center justify-between gap-4">
            <div class="flex flex-col">
                <span class="text-xs text-gray-500 uppercase font-bold">1 Item</span>
                <span class="text-lg font-bold text-[#141118] dark:text-white">₹32</span>
            </div>
            <a href="cart.html"
                class="flex-1 h-12 rounded-xl bg-primary text-white font-bold text-base shadow-lg shadow-primary/30 flex items-center justify-center gap-2">
                <span>View Cart</span>
                <span class="material-symbols-outlined text-lg">arrow_forward</span>
            </a>
        </div>
    </div>
</body>

</html>